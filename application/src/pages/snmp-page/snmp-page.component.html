<main class="flex-grow">
  <!-- Header for Title and Action Buttons, similar to settings pages -->
  <div class="mb-4">
    <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4">
      <h2 class="text-xl font-bold text-gray-200 flex items-center">
        <i class="fa-solid fa-network-wired mr-3 text-orange-400"></i>
        System Status
      </h2>
      <div class="flex items-center gap-4">
        <!-- Toggle for OID visibility -->
        <div class="hidden md:flex items-center gap-3">
          <span class="text-sm font-semibold text-gray-400">Show OIDs:</span>
          <button
            type="button"
            (click)="toggleDisplayOid()"
            class="relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-gray-800"
            [class]="displayOid() ? 'bg-orange-500' : 'bg-gray-600'"
            role="switch"
            [attr.aria-checked]="displayOid()">
            <span
              class="pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"
              [class]="displayOid() ? 'translate-x-5' : 'translate-x-0'">
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  @if (isAgentEnabled()) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 flex-grow">
      
      <!-- System Health Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-heart-pulse w-4 mr-2 text-center text-orange-400"></i>
            <span>System Health</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              ADC Voltage
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.1.1.0')">
                  1.3.6.1.4.1.55555.1.1.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.1.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ adcVoltage() }} V</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Temperature
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.1.2.0')">
                  1.3.6.1.4.1.55555.1.1.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.1.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ temperature() }} °C</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Uptime
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.2.1.1.3.0')">
                  1.3.6.1.2.1.1.3.0
                  @if (copiedOid() === '1.3.6.1.2.1.1.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ uptime() }}</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Startups
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.4.1.0')">
                  1.3.6.1.4.1.55555.1.4.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.4.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ healthStats().startups }}</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Watchdog Reboots
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.4.2.0')">
                  1.3.6.1.4.1.55555.1.4.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.4.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ healthStats().watchdogReboots }}</span>
          </div>
        </div>
      </div>
      
      <!-- Servos Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-robot w-4 mr-2 text-center text-orange-400"></i>
            <span>Servo Positions &amp; Limits</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <!-- X Axis (Gantry) -->
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              X Axis (Gantry)
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.1.0')">
                  1.3.6.1.4.1.55555.1.3.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ servoPositions().x }}°</span>
          </div>
          <div class="flex justify-between items-center pl-4 group">
            <div class="text-gray-400">
              Limits
              @if (displayOid()) {
                <div class="hidden md:flex flex-col text-xs text-gray-500 group-hover:text-gray-300">
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.1.1')">
                      1.3.6.1.4.1.55555.1.3.1.1 (Min)
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.1.1') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.1.2')">
                      1.3.6.1.4.1.55555.1.3.1.2 (Max)
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.1.2') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                </div>
              }
            </div>
            <div class="font-bold text-sm">
              @if (servoLimits().x_min && servoLimits().x_max) {
                <span class="text-red-400">LIMIT ERROR</span>
              } @else if (servoLimits().x_min) {
                <span class="text-red-400">LIMIT MIN</span>
              } @else if (servoLimits().x_max) {
                <span class="text-red-400">LIMIT MAX</span>
              }
            </div>
          </div>

          <!-- Y Axis (Left) -->
          <div class="flex justify-between items-center pt-2 border-t border-gray-800 group">
            <div class="text-gray-400">
              Y Axis (Left)
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.2.0')">
                  1.3.6.1.4.1.55555.1.3.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ servoPositions().y }}°</span>
          </div>
          <div class="flex justify-between items-center pl-4 group">
            <div class="text-gray-400">
              Limits
              @if (displayOid()) {
                <div class="hidden md:flex flex-col text-xs text-gray-500 group-hover:text-gray-300">
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.2.1')">
                      1.3.6.1.4.1.55555.1.3.2.1 (Min) 
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.2.1') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.2.2')">
                      1.3.6.1.4.1.55555.1.3.2.2 (Max)
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.2.2') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                </div>
              }
            </div>
            <div class="font-bold text-sm">
              @if (servoLimits().y_min && servoLimits().y_max) {
                <span class="text-red-400">LIMIT ERROR</span>
              } @else if (servoLimits().y_min) {
                <span class="text-red-400">LIMIT MIN</span>
              } @else if (servoLimits().y_max) {
                <span class="text-red-400">LIMIT MAX</span>
              }
            </div>
          </div>

          <!-- Y Axis (Right) -->
          <div class="flex justify-between items-center pt-2 border-t border-gray-800 group">
            <div class="text-gray-400">
              Y Axis (Right)
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.3.0')">
                  1.3.6.1.4.1.55555.1.3.3.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ servoPositions().yy }}°</span>
          </div>
          <div class="flex justify-between items-center pl-4 group">
            <div class="text-gray-400">
              Limits
              @if (displayOid()) {
                <div class="hidden md:flex flex-col text-xs text-gray-500 group-hover:text-gray-300">
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.3.1')">
                      1.3.6.1.4.1.55555.1.3.3.1 (Min) 
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.3.1') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.3.2')">
                      1.3.6.1.4.1.55555.1.3.3.2 (Max)
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.3.2') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                </div>
              }
            </div>
            <div class="font-bold text-sm">
              @if (servoLimits().yy_min && servoLimits().yy_max) {
                <span class="text-red-400">LIMIT ERROR</span>
              } @else if (servoLimits().yy_min) {
                <span class="text-red-400">LIMIT MIN</span>
              } @else if (servoLimits().yy_max) {
                <span class="text-red-400">LIMIT MAX</span>
              }
            </div>
          </div>

          <!-- Z Axis (Spindle) -->
          <div class="flex justify-between items-center pt-2 border-t border-gray-800 group">
            <div class="text-gray-400">
              Z Axis (Spindle)
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.4.0')">
                  1.3.6.1.4.1.55555.1.3.4.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.4.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ servoPositions().z }}°</span>
          </div>
          <div class="flex justify-between items-center pl-4 group">
            <div class="text-gray-400">
              Limits
              @if (displayOid()) {
                <div class="hidden md:flex flex-col text-xs text-gray-500 group-hover:text-gray-300">
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.4.1')">
                      1.3.6.1.4.1.55555.1.3.4.1 (Min) 
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.4.1') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                  <div class="flex items-center">
                    <span class="cursor-pointer" title="Click to copy OID" (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.3.4.2')">
                      1.3.6.1.4.1.55555.1.3.4.2 (Max)
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.3.4.2') {
                        <span class="ml-1 text-green-400 text-xs">(Copied)</span>
                      }
                    </span>
                  </div>
                </div>
              }
            </div>
            <div class="font-bold text-sm">
              @if (servoLimits().z_min && servoLimits().z_max) {
                <span class="text-red-400">LIMIT ERROR</span>
              } @else if (servoLimits().z_min) {
                <span class="text-red-400">LIMIT MIN</span>
              } @else if (servoLimits().z_max) {
                <span class="text-red-400">LIMIT MAX</span>
              }
            </div>
          </div>

        </div>
      </div>

      <!-- Waveshare ESP32 Onboard IO Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg md:col-span-1 lg:col-start-3 lg:row-span-3">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-toggle-on w-4 mr-2 text-center text-orange-400"></i>
            <span>Waveshare ESP32 Onboard IO</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          @for(output of visibleDigitalOutputs(); track output.id) {
            <div class="flex justify-between items-center group">
              <div class="text-gray-400">
                {{ output.name }}
                @if(displayOid()) {
                  <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                       title="Click to copy OID"
                       (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.8.1.' + (output.id + 1))">
                    1.3.6.1.4.1.55555.1.8.1.{{ output.id + 1 }}
                    @if (copiedOid() === '1.3.6.1.4.1.55555.1.8.1.' + (output.id + 1)) {
                      <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                    }
                  </div>
                }
              </div>
              <span class="font-bold" [class]="output.state ? 'text-green-400' : 'text-red-400'">{{ output.state ? 'ON' : 'OFF' }}</span>
            </div>
          }
          @if (visibleDigitalOutputs().length > 0 && visibleDigitalInputs().length > 0) {
            <div class="pt-2 my-1 border-t border-gray-800"></div>
          }
          @for(input of visibleDigitalInputs(); track input.id) {
            <div class="flex justify-between items-center group">
              <div class="text-gray-400">
                {{ input.name }}
                @if(displayOid()) {
                  <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                       title="Click to copy OID"
                       (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.8.2.' + (input.id + 1))">
                    1.3.6.1.4.1.55555.1.8.2.{{ input.id + 1 }}
                    @if (copiedOid() === '1.3.6.1.4.1.55555.1.8.2.' + (input.id + 1)) {
                      <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                    }
                  </div>
                }
              </div>
              <span class="font-bold" [class]="input.state ? 'text-green-400' : 'text-gray-500'">{{ input.state ? 'HIGH' : 'LOW' }}</span>
            </div>
          }
          @if (visibleDigitalOutputs().length === 0 && visibleDigitalInputs().length === 0) {
            <div class="text-center text-gray-500 py-4">
                (No digital I/O enabled)
            </div>
          }
        </div>
      </div>

      <!-- SD Card Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-sd-card w-4 mr-2 text-center text-orange-400"></i>
            <span>SD Card Storage</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Disk Available
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.2.1.0')">
                  1.3.6.1.4.1.55555.1.2.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.2.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sdCardAvailableGb() }} GB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Disk Used
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.2.2.0')">
                  1.3.6.1.4.1.55555.1.2.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.2.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sdCardInfo().usedGb }} GB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              % Free
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.2.3.0')">
                  1.3.6.1.4.1.55555.1.2.3.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.2.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
                }
              </div>
              <span class="font-bold text-orange-300">{{ sdCardPercentFree() }} %</span>
          </div>
        </div>
      </div>

      <!-- Local Storage Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-database w-4 mr-2 text-center text-orange-400"></i>
            <span>Local Storage</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Storage Available
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.5.1.0')">
                  1.3.6.1.4.1.55555.1.5.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.5.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ localStorageAvailableMb() }} MB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Storage Used
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.5.2.0')">
                  1.3.6.1.4.1.55555.1.5.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.5.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ localStorageUsedMb() }} MB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              % Free
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.5.3.0')">
                  1.3.6.1.4.1.55555.1.5.3.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.5.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ localStoragePercentFree() }} %</span>
          </div>
        </div>
      </div>

      <!-- LED Card (Moved) -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-lightbulb w-4 mr-2 text-center text-orange-400"></i>
            <span>LED</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Power Consumption
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.10.1.0')">
                  1.3.6.1.4.1.55555.1.10.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.10.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold" [class]="ledPowerConsumption() >= (ledsConfig().MAX_POWER_CONSUMPTION * (ledsConfig().POWER_WARNING_THRESHOLD / 100)) ? 'text-red-400' : 'text-orange-300'">{{ ledPowerConsumption() }} W</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Max Power Allowed
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.10.2.0')">
                  1.3.6.1.4.1.55555.1.10.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.10.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ ledsConfig().MAX_POWER_CONSUMPTION }} W</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Dynamic Brightness
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.10.3.0')">
                  1.3.6.1.4.1.55555.1.10.3.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.10.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold" [class]="ledsConfig().DYNAMIC_BRIGHTNESS_ENABLED ? 'text-green-400' : 'text-red-400'">
              {{ ledsConfig().DYNAMIC_BRIGHTNESS_ENABLED ? 'Enabled' : 'Disabled' }}
            </span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              LEDs Enabled
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.10.4.0')">
                  1.3.6.1.4.1.55555.1.10.4.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.10.4.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold" [class]="ledsState().power ? 'text-green-400' : 'text-red-400'">
              {{ ledsState().power ? 'ON' : 'OFF' }}
            </span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Master Brightness
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.10.5.0')">
                  1.3.6.1.4.1.55555.1.10.5.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.10.5.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold" [class]="ledPowerConsumption() >= (ledsConfig().MAX_POWER_CONSUMPTION * (ledsConfig().POWER_WARNING_THRESHOLD / 100)) ? 'text-red-400' : 'text-orange-300'">{{ masterBrightnessPercent() }}%</span>
          </div>
        </div>
      </div>

      <!-- SRAM Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-memory w-4 mr-2 text-center text-orange-400"></i>
            <span>SRAM</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Total SRAM
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.6.1.0')">
                  1.3.6.1.4.1.55555.1.6.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.6.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sramInfo().totalKb.toFixed(1) }} KB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Used SRAM
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.6.2.0')">
                  1.3.6.1.4.1.55555.1.6.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.6.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sramInfo().usedKb.toFixed(1) }} KB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Free SRAM
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.6.3.0')">
                  1.3.6.1.4.1.55555.1.6.3.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.6.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sramInfo().freeKb.toFixed(1) }} KB</span>
          </div>
          <div class="flex justify-between items-center pt-2 border-t border-gray-700/50 group">
            <div class="text-gray-400">
              Largest Free Block
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.6.4.0')">
                  1.3.6.1.4.1.55555.1.6.4.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.6.4.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sramInfo().largestFreeBlockKb.toFixed(1) }} KB</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Fragmentation
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.6.5.0')">
                  1.3.6.1.4.1.55555.1.6.5.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.6.5.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ sramFragmentationPercent() }} %</span>
          </div>
        </div>
      </div>

      <!-- EEPROM Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-database w-4 mr-2 text-center text-orange-400"></i>
            <span>EEPROM Storage</span>
          </h3>
        </div>
        <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Total Size
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.7.1.0')">
                  1.3.6.1.4.1.55555.1.7.1.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.7.1.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ eepromInfo().totalBytes }} B</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Used
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.7.2.0')">
                  1.3.6.1.4.1.55555.1.7.2.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.7.2.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ eepromInfo().usedBytes }} B</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              Available
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.7.3.0')">
                  1.3.6.1.4.1.55555.1.7.3.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.7.3.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ eepromAvailableBytes() }} B</span>
          </div>
          <div class="flex justify-between items-center group">
            <div class="text-gray-400">
              % Free
              @if (displayOid()) {
                <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                     title="Click to copy OID"
                     (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.7.4.0')">
                  1.3.6.1.4.1.55555.1.7.4.0
                  @if (copiedOid() === '1.3.6.1.4.1.55555.1.7.4.0') {
                    <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                  }
                </div>
              }
            </div>
            <span class="font-bold text-orange-300">{{ eepromPercentFree() }} %</span>
          </div>
        </div>
      </div>

      <!-- Waveshare RS485 Analog Input Card -->
      <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg">
        <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
          <h3 class="font-bold text-gray-300 text-base flex items-center">
            <i class="fa-solid fa-wave-square w-4 mr-2 text-center text-orange-400"></i>
            <span>Waveshare RS485 Analog Input</span>
          </h3>
        </div>
        @if (visibleAnalogInputs().length > 0) {
          <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
            @for (input of visibleAnalogInputs(); track input.id) {
              <div class="flex justify-between items-center group">
                <div class="text-gray-400">
                  {{ input.name }}
                  @if (displayOid()) {
                    <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                         title="Click to copy OID"
                         (click)="copyOidToClipboard($event, '1.3.6.1.4.1.55555.1.9.1.' + (input.id + 1))">
                      1.3.6.1.4.1.55555.1.9.1.{{ input.id + 1 }}
                      @if (copiedOid() === '1.3.6.1.4.1.55555.1.9.1.' + (input.id + 1)) {
                        <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                      }
                    </div>
                  }
                </div>
                <span class="font-bold text-orange-300">{{ input.value }} ({{ input.percent.toFixed(1) }}%)</span>
              </div>
            }
          </div>
        } @else {
          <div class="space-y-2 font-mono text-sm text-center text-gray-500 py-4 border-t border-gray-700">
              (No analog inputs currently enabled)
          </div>
        }
      </div>
      
      <!-- Dynamically Added Module Cards -->
      @for (module of statusPageModules(); track module.id) {
        <div class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg md:col-span-1">
          <div class="w-full text-left p-3 flex justify-between items-center bg-gray-900/50">
            <h3 class="font-bold text-gray-300 text-base flex items-center">
              <i class="fa-solid fa-puzzle-piece w-4 mr-2 text-center text-orange-400"></i>
              <span>{{ module.moduleName }}</span>
            </h3>
          </div>
          <div class="space-y-2 font-mono text-sm p-4 border-t border-gray-700">
            @for (port of module.enabledPorts; track port.name) {
              <div class="flex justify-between items-center group">
                <div class="text-gray-400">
                  {{ port.name }}
                  @if (displayOid() && port.oid) {
                    <div class="hidden md:flex text-xs text-gray-500 items-center group-hover:text-gray-300 cursor-pointer" 
                         title="Click to copy OID"
                         (click)="copyOidToClipboard($event, port.oid)">
                      {{ port.oid }}
                      @if (copiedOid() === port.oid) {
                        <span class="ml-2 text-green-400 text-xs">(Copied)</span>
                      }
                    </div>
                  }
                </div>
                @if (module.function === 'Relay') {
                  <span class="font-bold text-gray-500">
                    {{ port.enabled ? 'Enabled' : 'Disabled' }}
                  </span>
                } @else if (module.function === 'IO') {
                  <span class="font-bold text-gray-500">
                    {{ port.type }} / {{ port.signal }}
                  </span>
                }
              </div>
            }
            @if (module.enabledPorts.length === 0) {
              <div class="text-center text-gray-500 py-4">(No enabled ports)</div>
            }
          </div>
        </div>
      }

    </div>
  } @else {
     <div class="bg-gray-800/50 border border-gray-700 rounded-lg p-6 shadow-lg h-full flex flex-col items-center justify-center text-center">
      <i class="fa-solid fa-power-off text-5xl text-gray-600 mb-4"></i>
      <h3 class="text-xl font-bold text-gray-400">SNMP Agent Disabled</h3>
      <p class="text-gray-500 mt-2 max-w-sm">The SNMP agent service is currently turned off to save memory. To view SNMP data, please enable it in the settings.</p>
      <a routerLink="/settings/network" class="mt-6 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 shadow-md">
        Go to Settings
      </a>
    </div>
  }
</main>
