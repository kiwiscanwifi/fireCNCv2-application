<!--
  File: src/pages/snmp-traps/snmp-traps.component.html
  Project: fireCNC
  Author: Mark Dyer
  Location: Blenheim, New Zealand
  Contact: intelliservenz@gmail.com

  Description:
  Template for the SNMP Traps page. Renders a full-page live log viewer
  for sent SNMP traps.
-->
<main class="flex-grow flex flex-col">
  <div class="bg-gray-800/50 border border-gray-700 rounded-lg p-6 shadow-lg flex flex-col flex-grow">
    <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-4">
      <h3 class="text-xl font-bold text-gray-300 flex items-center">
        <i class="fa-solid fa-clipboard-list mr-3 text-orange-400"></i>
        SNMP Log
      </h3>
      <button (click)="clearLogs()" class="self-end sm:self-auto bg-red-800 hover:bg-red-700 border border-red-600 text-white font-bold py-2 px-2 sm:px-4 rounded-lg transition-colors duration-200 shadow-md text-sm shrink-0">
        <i class="fa-solid fa-trash sm:mr-2"></i>
        <span class="hidden sm:inline">Clear Log</span>
      </button>
    </div>
    
    @if (reversedTraps().length > 0) {
      <div #logContainer class="flex-grow bg-black/50 rounded p-3 font-mono text-sm text-gray-400 min-h-0 overflow-y-auto">
        @for(trap of reversedTraps(); track trap.timestamp) {
          <div class="block sm:flex sm:items-start sm:gap-x-2 mb-1">
            <div class="flex-shrink-0 whitespace-nowrap">
              <span class="text-gray-500 mr-2">{{ trap.timestamp | date:'dd/MM/yy HH:mm:ss' }}</span>
            </div>
            <p class="whitespace-pre-wrap flex-1 pt-1 sm:pt-0 pl-2 sm:pl-0 text-blue-300">{{ trap.message }}</p>
          </div>
        }
      </div>
    } @else {
      <div class="flex-grow bg-black/50 rounded p-3 font-mono text-sm text-gray-400 min-h-0">
        <p class="text-gray-500">No SNMP traps sent yet...</p>
      </div>
    }
  </div>
</main>